# 4.1 Documento de Arquitetura de Software (DAS)

## 4.1.1 Introdução

Este documento descreve a arquitetura do sistema **Planetário Virtual**, que visa proporcionar aos usuários uma experiência imersiva de observação de corpos celestes em um ambiente digital interativo. O documento detalha a representação arquitetural, os componentes principais, restrições e critérios de qualidade.

## 4.1.2 Representação Arquitetural

A arquitetura do sistema adota uma abordagem **cliente-servidor** com **frontend web interativo** e um **backend RESTful**. Os principais componentes são:

  - Aplicação Web (navegador) com visualização 3D
  - Servidor de aplicação (API REST)
  - Base de dados (JSON)

O estilo arquitetural predominante é **arquitetura em camadas**, separando apresentação, lógica de negócio e persistência de dados.

## 4.1.3 Metas e Restrições Arquiteturais

**Metas:**

  - Fornecer renderização 3D em tempo real de corpos celestes
  - Permitir consultas dinâmicas de dados astronômicos
  - Suportar acesso simultâneo de múltiplos usuários

**Restrições:**

  - Compatibilidade com navegadores modernos (Chrome, Firefox, Edge)
  - Uso de dados públicos de APIs externas (ex.: NASA)
  - Performance aceitável em hardware de especificação média

## 4.1.4 Visualização Caso de Uso

Os principais casos de uso incluem:

  - **Consultar corpo celeste:** Usuário seleciona um objeto e visualiza detalhes.
  - **Interagir no fórum:** Criar e responder postagens.

<p align="center">
<strong>Imagem 1 – Diagrama de Caso de Uso</strong><br/>
  <img src="../assets/DiagramaCasoUso.png" alt="Camadas"/>
</p>
<p align="center">
  autor: <a href="https://github.com/MilenaFRocha">Milena Rocha</a>
</p>

## 4.1.5 Visualização Lógica

A visualização lógica organiza os componentes em camadas:

  * **Camada de Apresentação**

      * Interface Web (HTML, CSS, JavaScript, Next)

  * **Camada de Lógica**

      * API REST (FastAPI)

  * **Camada de Persistência**

      * Banco de dados (JSON)
      * Cache local para otimizar consultas

## 4.1.6 Visualização de Processo

Os processos são distribuídos em:

  * **Processo do Cliente:** Renderização gráfica e interação do usuário.
  * **Processo do Servidor:** Exposição de API REST, autenticação e agregação de dados.
  * **Processo de Sincronização de Dados:** Job que periodicamente atualiza o banco com dados astronômicos de APIs externas.

## 4.1.7 Visualização de Deploy

A infraestrutura é implantada em nuvem:

  * **Frontend:** Render
  * **Backend e Banco de Dados:** Render

<p align="center">
<strong>Imagem 2 – Arquitetura em Camadas</strong><br/>
  <img src="../assets/arquiteturaCamadas.png" alt="Camadas"/>
</p>
<p align="center">
  autor: <a href="https://github.com/MilenaFRocha">Milena Rocha</a>
</p>

## 4.1.8 Visualização de Implementação

O repositório é organizado da seguinte forma:

```
── projeto
    ├── grupo1
    │   ├── README.md
    │   ├── backend
    │   │   ├── .gitkeep
    │   │   ├── README.md
    │   │   ├── api.md
    │   │   ├── app
    │   │   │   ├── __init__.py
    │   │   │   ├── data_classes
    │   │   │   │   ├── comentario_data.py
    │   │   │   │   ├── postagem_data.py
    │   │   │   │   └── user_data.py
    │   │   │   ├── decorators
    │   │   │   │   └── auth_decorator.py
    │   │   │   ├── main.py
    │   │   │   ├── models
    │   │   │   │   ├── comentario_model.py
    │   │   │   │   ├── postagem_model.py
    │   │   │   │   └── user_model.py
    │   │   │   ├── routers
    │   │   │   │   ├── comentario_router.py
    │   │   │   │   ├── postagem_router.py
    │   │   │   │   └── user_router.py
    │   │   │   ├── services
    │   │   │   │   ├── comentario_service.py
    │   │   │   │   ├── forum_service.py
    │   │   │   │   └── postagem_service.py
    │   │   │   └── utils.py
    │   │   ├── backup-db.json
    │   │   ├── db.json
    │   │   └── requirements.txt
    │   └── frontend
    │       ├── .gitignore
    │       ├── README.md
    │       ├── eslint.config.mjs
    │       ├── next.config.ts
    │       ├── package-lock.json
    │       ├── package.json
    │       ├── postcss.config.mjs
    │       ├── public
    │       │   ├── file.svg
    │       │   ├── globe.svg
    │       │   ├── logo.svg
    │       │   ├── next.svg
    │       │   ├── vercel.svg
    │       │   └── window.svg
    │       ├── src
    │       │   ├── app
    │       │   │   ├── (auth)
    │       │   │   │   └── login
    │       │   │   │       └── page.tsx
    │       │   │   ├── (main)
    │       │   │   │   ├── layout.tsx
    │       │   │   │   ├── meu-perfil
    │       │   │   │   │   └── page.tsx
    │       │   │   │   ├── page.tsx
    │       │   │   │   ├── postagens
    │       │   │   │   │   └── [id]
    │       │   │   │   │       └── page.tsx
    │       │   │   │   └── usuarios
    │       │   │   │       └── page.tsx
    │       │   │   ├── favicon.ico
    │       │   │   ├── globals.css
    │       │   │   ├── layout.tsx
    │       │   │   └── lib
    │       │   │       └── sortingStrategies.ts
    │       │   ├── components
    │       │   │   ├── auth
    │       │   │   │   └── LoginControls.tsx
    │       │   │   ├── forum
    │       │   │   │   ├── CommentForm.tsx
    │       │   │   │   ├── CreatePostForm.tsx
    │       │   │   │   ├── PostDetailView.tsx
    │       │   │   │   ├── PostItem.tsx
    │       │   │   │   └── PostList.tsx
    │       │   │   ├── layout
    │       │   │   │   ├── Footer.tsx
    │       │   │   │   └── Navbar.tsx
    │       │   │   ├── providers
    │       │   │   │   └── ToastProvider.tsx
    │       │   │   └── users
    │       │   │       └── UserCard.tsx
    │       │   ├── contexts
    │       │   │   └── AuthContext.tsx
    │       │   └── services
    │       │       ├── api.ts
    │       │       └── apiAdapters.ts
    │       └── tsconfig.json
```

Cada módulo é versionado independentemente.

## 4.1.9 Visualização de Dados

O modelo de dados principal inclui:

<p align="center">
<strong>Imagem 3 – DER</strong><br/>
  <img src="../assets/der.png" alt="Camadas"/>
</p>
<p align="center">
  autor: <a href="https://github.com/MilenaFRocha">Milena Rocha</a>
</p>

### MER – Modelo Entidade Relacionamento

Entidades e Relacionamentos

#### **USUÁRIO**

  * **Atributos:**

      * `id_usuario` (PK)
      * `nome`
      * `tipo`

  * **Relacionamentos:**

      * *Escreve* POSTAGEM (1:N)
      * *Comenta* COMENTARIO (1:N)

-----

#### **POSTAGEM**

  * **Atributos:**

      * `id_postagem` (PK)
      * `conteudo`
      * `data_criacao`
      * `autor_id` (FK)

  * **Relacionamentos:**

      * *Recebe* COMENTARIO (1:N)

-----

#### **COMENTARIO**

  * **Atributos:**

      * `id_comentario` (PK)
      * `conteudo`
      * `data_criacao`
      * `autor_id` (FK)
      * `postagem_id` (FK)

-----

### DLD – Dicionário de Dados

#### Tabela: USUARIO

| Campo       | Tipo | Chave | Obrigatório | Descrição                      |
| ----------- | ---- | ----- | ----------- | ------------------------------ |
| id\_usuario | int  | PK    | Sim         | Identificador único do usuário |
| nome        | text |       | Sim         | Nome do usuário                |
| tipo        | text |       | Sim         | Tipo de usuário (ex.: comum)   |

-----

#### Tabela: POSTAGEM

| Campo         | Tipo     | Chave | Obrigatório | Descrição                          |
| ------------- | -------- | ----- | ----------- | ---------------------------------- |
| id\_postagem  | int      | PK    | Sim         | Identificador único da postagem    |
| conteudo      | text     |       | Sim         | Conteúdo textual da postagem       |
| data\_criacao | datetime |       | Sim         | Data e hora de criação da postagem |
| autor\_id     | int      | FK    | Sim         | Referência ao usuário autor        |

-----

#### Tabela: COMENTARIO

| Campo          | Tipo     | Chave | Obrigatório | Descrição                             |
| -------------- | -------- | ----- | ----------- | ------------------------------------ |
| id\_comentario | int      | PK    | Sim         | Identificador único do comentário    |
| conteudo       | text     |       | Sim         | Conteúdo textual do comentário       |
| data\_criacao  | datetime |       | Sim         | Data e hora de criação do comentário |
| autor\_id      | int      | FK    | Sim         | Referência ao usuário autor          |
| postagem\_id   | int      | FK    | Sim         | Referência à postagem comentada      |

-----

#### Resumo dos Relacionamentos

  * **USUARIO – POSTAGEM**
    1:N (Um usuário pode escrever muitas postagens)

  * **USUARIO – COMENTARIO**
    1:N (Um usuário pode escrever muitos comentários)

  * **POSTAGEM – COMENTARIO**
    1:N (Uma postagem pode receber muitos comentários)

## 4.1.10 Qualidade

Critérios de qualidade incluem:

  * **Usabilidade:** Interface intuitiva e responsiva
  * **Segurança:** HTTPS, autenticação JWT, validação de input
  * **Escalabilidade:** Capacidade de atender crescimento de usuários e dados